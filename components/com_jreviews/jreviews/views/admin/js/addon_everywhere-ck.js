(function(e){jreviews.everywhere={init:function(){var e=jrPage;e.on("change","select#jr-everywhere-extension",function(){})},selectExtension:function(e,t){var n=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_everywhere",action:"_loadCategories"});n.done(function(e){t.find("div#jr-everywhere-categories").html(e)})},edit:function(t,n){var r=t.data("id")||0,i=t.closest("form"),s=r>0?"edit":"create",o=t.html(),u=t.data("extension"),a=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_everywhere",action:s,data:{id:r,extension:u}});a.done(function(t){var r={};r[jreviews.__t("SAVE")]=function(){var t=e(this),r=t.find("form"),i=jreviews.dispatch({form:r,data:{"data[task]":s}}),o=r.find("div.jr-validation");o.hide();i.done(function(r){if(r.success){t.dialog("close");n.html(r.html).fadeIn("fast").promise().done(function(){e.each(r.id,function(e,t){var r=n.find('div.jr-layout-outer[data-id="'+t+'"]');jreviews.tools.flashRow(r)})})}else r.str.length&&o.html(jreviews.__t(r.str)).show()})};var i=s==="edit"?500:800;r[jreviews.__t("CANCEL")]=function(){e(this).dialog("close")};var u=e.jrDialog(t,{title:o,buttons:r,width:i+"px"}),a=e(".ui-dialog-buttonpane");a.find("button:contains("+jreviews.__t("SAVE")+")").addClass("jrButton jrGreen").prepend('<span class="jrIconSave"></span>');a.find("button:contains("+jreviews.__t("CANCEL")+")").addClass("jrButton").prepend('<span class="jrIconCancel"></span>')})}};jreviews.addOnload("everywhere",jreviews.everywhere.init)})(jQuery);