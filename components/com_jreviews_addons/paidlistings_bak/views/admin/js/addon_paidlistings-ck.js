jreviews.paid=jreviews.paid||{};(function(e,t){jreviews.paid={init:function(){var t=jrPage;t.on("click","div.jr-paid-admin button#jr-chart-update",function(e){e.preventDefault();jreviews.paid.chartUpdate(t)});t.on("click","button.jr-paid-txn",function(t){t.preventDefault();jreviews.paid.orderTxn(e(this))});t.on("click",'.jr-paid-orders-list .jr-user-autocomplete:not(".jr-ready")',function(t){t.preventDefault();var n=e(this);jreviews.userAutocomplete(n.closest("form"))});t.on("click",".jr-paid-plans-list .jr-plan-create-orders",function(t){t.preventDefault();jreviews.paidlistings_plans.generateOrders(e(this))});t.on("click",".jr-paid-plans-list .jr-plan-sync-orders",function(t){t.preventDefault();jreviews.paidlistings_plans.updateOrders(e(this))});t.on("click",".jr-invoice",function(t){t.preventDefault();jreviews.paid.invoice.print(e(this))});jreviews.addOnloadAjax("paid-charts",jreviews.paid.loadGoogleCharts)},loadGoogleCharts:function(){google.load("visualization","1",{packages:["corechart"],callback:jreviews.paid.chartSetup})},chartSetup:function(){var t=jrPage,n=t.find('div.jr-paid-admin:not(".jr-ready-chart")');if(n.length){n.addClass("jr-ready-chart");var r=t.find("input#jr-date-from, input#jr-date-to").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:3,onSelect:function(n){var i=this.id=="jr-date-from"?"minDate":"maxDate",s=e(this).data("datepicker"),o=e.datepicker.parseDate(s.settings.dateFormat||e.datepicker._defaults.dateFormat,n,s.settings);r.not(this).datepicker("option",i,o);t.find("#"+this.id+"-alt").val(e.datepicker.formatDate("yy-mm-dd",o))}});jreviews.paid.chartUpdate(t)}},chartUpdate:function(e){var t={date_from:e.find("input#jr-date-from-alt").val(),date_to:e.find("input#jr-date-to-alt").val()},n=jreviews.dispatch({method:"get",type:"json",controller:"admin/admin_paidlistings",action:"getSalesData",data:t});n.done(function(n){jreviews.paid.salesChart(e,n.revenue,t);jreviews.paid.volumeChart(e,n.volume,t)})},salesChart:function(t,n,r){var i=0,s=t.find("#jr-sales-chart"),o=s.data("curr-symbol"),u=s.data("title");s.empty();if(!n.length)return!1;var a=new google.visualization.DataTable;a.addColumn("date","Date");a.addColumn("number","Sales");a.addColumn({type:"string",role:"annotation"});if(n.length==1){i+=n[0][1];a.addRow([new Date(r.date_from),0,o+0]);a.addRow([new Date(n[0][0]),n[0][1],o+n[0][1]]);a.addRow([new Date(r.date_to),0,o+0])}else e(n).each(function(e){i+=n[e][1];a.addRow([new Date(n[e][0]),n[e][1],o+n[e][1]])});t.find("#jr-total-sales").html(jreviews.paid.formatCurrency(i,o));var f=new google.visualization.NumberFormat({prefix:o});f.format(a,1);var l={title:u,width:"100%",height:"300",fontSize:12,colors:["#216c2a"],titleTextStyle:{color:"#111",fontSize:24},chartArea:{width:"92%",height:200,top:40,right:40,bottom:40,left:40},vAxis:{format:"$#",minValue:10},lineWidth:4,pointSize:8,legend:"none"},c=new google.visualization.AreaChart(s[0]);c.draw(a,l);e(window).resize(function(){c.draw(a,l)})},volumeChart:function(t,n,r){var i=0,s=t.find("#jr-volume-chart"),o=s.data("title");s.empty();if(!n.length)return!1;var u=new google.visualization.DataTable;u.addColumn("date","Date");u.addColumn("number","Orders");u.addColumn({type:"number",role:"annotation"});if(n.length==1){u.addRow([new Date(r.date_from),0,0]);u.addRow([new Date(n[0][0]),n[0][1],n[0][1]]);u.addRow([new Date(r.date_to),0,0])}else e(n).each(function(e){u.addRow([new Date(n[e][0]),n[e][1],n[e][1]])});t.find("#jr-total-volume").html(Number(i));var a={title:o,width:"100%",height:"300",fontSize:12,titleTextStyle:{color:"#111",fontSize:24},chartArea:{width:"92%",height:200,top:40,right:40,bottom:40,left:40},vAxis:{minValue:4},lineWidth:4,pointSize:8,legend:"none"},f=new google.visualization.AreaChart(s[0]);f.draw(u,a);e(window).resize(function(){f.draw(u,a)})},formatCurrency:function(e,t){e=e.toString().replace(/\$|\,/g,"");isNaN(e)&&(e="0");sign=e==(e=Math.abs(e));e=Math.floor(e*100+.50000000001);cents=e%100;e=Math.floor(e/100).toString();cents<10&&(cents="0"+cents);for(var n=0;n<Math.floor((e.length-(1+n))/3);n++)e=e.substring(0,e.length-(4*n+3))+","+e.substring(e.length-(4*n+3));return(sign?"":"-")+t+e+"."+cents},getTreeCheckedIds:function(t){var n=[];e("#"+t).find("li.jstree-checked").each(function(){this.id.match(/^([0-9]+|jr_[a-z0-9]+)$/)!==null&&n.push(this.id)});return n},orderTxn:function(t){var n=t.data("id"),r=t.data("listing-id"),i=t.data("txn-id"),s=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_paidlistings_txn",action:"getOrderTxn",data:{id:n,txn_id:i,listing_id:r}});s.done(function(t){e.jrDialog(t,{width:"850px",height:"600",position:"top"})})},plan:{controlFieldClass:{},planList:{},plan_selected:null,formFilter:function(t){var n=jreviews.paid.plan.plan_selected;if(n===null)return!1;var r=jreviews.paid.plan.controlFieldClass,i=jreviews.paid.plan.planList["plan"+n].fields,s=t.find("#jr-paid-plan-fields"),o=r.getTabs();s.length===0?t.append('<input type="hidden" id="jr-paid-plan-fields" name="data[Paid][fields]" value="'+i+'" />'):s.val(i);var u=t.find("#jr-paid-plan-list");u.find(":radio[value="+n+"]").length===0&&t.append('<input type="hidden" name="data[PaidOrder][plan_id]" value="'+n+'" />');t.find("fieldset").each(function(){var t=e(this);if(t.attr("class")=="jr-form-review")return!1;var n=t.children(".jrFieldDiv"),r=n.length;if(r>0){n.each(function(){var t=e(this).find(':input[class^="jr_"]');if(t.length){var n=t.attr("class").split(" ")[0];if(typeof jreviews.paid.plan.controlFieldClass.getFieldObj=="function"){var s=jreviews.paid.plan.controlFieldClass.getFieldObj(n);if(s!==!1)if(e.inArray(n,i)==-1){s.closest("div.jrFieldDiv").css("display","none");r--}else s.data("isControlled")===!1&&s.closest("div.jrFieldDiv").show("fast")}}});if(r===0){t.css("display","none");o.length&&t.attr("id")&&o.filter("li#tab_"+t.attr("id").replace("group_","")).hide("fast")}else if(t.data("isControlled")!==!0||t.data("isActive")===!0){t.fadeIn();o.length&&t.attr("id")&&o.filter("li#tab_"+t.attr("id").replace("group_","")).fadeIn("slow")}}})}},invoice:{print:function(e){var t=e.data("url");window.open(t,"invoice","location=no,status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=yes,resizable=yes,width=900,height=600,directories=no")}}};jreviews.paidlistings_coupons={edit:function(n,r){var i=n.data("id")||0,s=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_paidlistings_coupons",action:"edit",data:{id:i}});s.done(function(i){var s=r.children("div").eq(0),o=e("<div>");o.insertBefore(s);var u=s.detach();o.html(i).jrScrollTo();var a=o.find("form");jreviews.paidlistings_coupons.initCategoryTree(a);var f=a.find(".jr-user-autocomplete"),l=a.find(".jr-user-checkbox-div");l.find(":input").length===0&&l.hide();a.on("click",".jr-coupon-user",function(){l.find(":input").length==1&&l.hide();e(this).parent("label").remove()});f.autocomplete({minLength:2,source:function(n,r){var i=l.find(":input:checked").map(function(e,t){return this.value});if(f.data("cache."+n.term)){var s=f.data("cache."+n.term),o=[];e(s).each(function(n,r){r!==t&&e.inArray(r.id,i)==-1&&o.push(s[n])});r(o)}else{var u=jreviews.dispatch({method:"get",type:"json",controller:"users",action:"_getList",data:{limit:12,q:n.term}});u.done(function(s){f.data("cache."+n.term,s);var o=[];e(s).each(function(n,r){r!==t&&e.inArray(r.id,i)==-1&&o.push(s[n])});r(o)})}},select:function(t,n){if(n.item.id!==""&&!f.data(n.item.id)){var r={id:"jr-coupon-user-"+n.item.id,"class":"jr-coupon-user",name:"data[PaidCoupon][coupon_users][]",value:n.item.id},i=e('<input type="checkbox" checked="checked" />').attr(r),s=e('<label for="jr-coupon-user-'+n.item.id+'" />').css("text-align","left");s.append(i).append(n.item.name);f.val("").focus();l.show().append(s)}this.value="";return!1}});o.on("click","button.jr-save",function(e){e.preventDefault();jreviews.paidlistings_coupons.save(n,a,o,u)});o.on("click","button.jr-cancel",function(e){e.preventDefault();u.insertAfter(o).fadeIn("fast");o.remove()});o.find(".jr-tabs").tabs()})},save:function(e,t,n,r){var i=e.closest("div.jr-layout-outer"),s=n.find(".jr-toolbar button").attr("disabled","disabled"),o=e.data("id"),u=n.find("div.jr-validation");u.hide();n.find("#cat_ids").val(jreviews.paid.getTreeCheckedIds("jr-cat-tree"));var a=jreviews.dispatch({form:t});a.done(function(e){e.success===!0?e.isNew?n.fadeOut().promise().done(function(){r.html(e.html);var t=r.find('div.jr-layout-outer[data-id="'+e.id+'"]');r.insertAfter(n).fadeIn("fast").promise().done(function(){t.jrScrollTo({offset:-100,duration:500});jreviews.tools.flashRow(t)});n.remove()}):n.fadeOut("fast").promise().done(function(){r.insertAfter(n).fadeIn("fast").promise().done(function(){i.jrScrollTo({offset:-100,duration:500});jreviews.tools.flashRow(i)});n.remove()}):e.str!==""&&u.html(jreviews.__t(e.str)).show()});a.always(function(){s.removeAttr("disabled")})},initCategoryTree:function(t){var n=t.find("#jr-cat-tree");t.on("click","button.jr-cat-tree-toggle",function(t){t.preventDefault();n.jstree(e(this).hasClass("jr-tree-open")?"close_all":"open_all");e(this).toggleClass("jr-tree-open")});n.bind("loaded.jstree",function(n,r){e.each(t.find("#curr_cat_ids").val().split(","),function(t,n){r.inst.check_node(e("#"+n))})}).jstree({themes:{theme:"default",icons:!1},plugins:["themes","ui","json_data","checkbox"],json_data:{ajax:{type:"get",url:s2AjaxUri+"&url=admin_paidlistings_coupons/jsonCategoryTree"}},types:{types:{"default":{renameable:!1,deletable:!1,creatable:!1,draggable:!1}}}})}};jreviews.paidlistings_emails={edit:function(t,n){var r=t.data("id"),i=t.data("name"),s=t.closest("div.jr-layout-outer"),o=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_paidlistings_emails",action:"edit",data:{id:r}});o.done(function(t){var n={};n[jreviews.__t("SUBMIT")]=function(){var t=e(this),n=t.find("form"),r=jreviews.dispatch({form:n});r.done(function(e){t.dialog("close");jreviews.tools.flashRow(s)})};n[jreviews.__t("CANCEL")]=function(){e(this).dialog("close")};e.jrDialog(t,{title:i,position:"top",buttons:n,width:"800px"});var r=e(".ui-dialog-buttonpane");r.find("button:contains("+jreviews.__t("SUBMIT")+")").addClass("jrButton").prepend('<span class="jrIconYes"></span>');r.find("button:contains("+jreviews.__t("CANCEL")+")").addClass("jrButton").prepend('<span class="jrIconCancel"></span>')})}};jreviews.paidlistings_plans={formSetup:function(t){var n=e('select[name="data[PaidPlan][plan_array][duration_period]"]'),r=n.clone();jreviews.paidlistings_plans.initCategoryTree(t);jreviews.paidlistings_plans.initFieldGroupsTree(t);t.on("change","form",function(){var i=e(this),s=i.data("payment_type")||null,o=i.data("plan_type")||null,u=t.find('select[name="data[PaidPlan][plan_type]"] option:selected').val(),a=t.find('select[name="data[PaidPlan][payment_type]"] option:selected').val(),f=n.find("option:selected").val(),l=t.find(':input[name="data[PaidPlan][plan_array][duration_number]"]'),c=t.find(':input[name="data[PaidPlan][plan_price]"]'),h=t.find(':input[name="data[PaidPlan][plan_array][trial_limit]"]').closest(".jrGrid24"),p=t.find(':input[name="data[PaidPlan][plan_array][moderation]"]').closest(".jrGrid24"),d=t.find(':input[name="data[PaidPlan][plan_array][submit_form]"]').closest(".jrGrid24"),v=t.find(':input[name="data[PaidPlan][plan_upgrade_exclusive]"]').closest(".jrGrid24"),m=t.find("#jr-paid-type-msg"),g=t.find("#jr-paid-upgrade-msg");i.data("payment_type",a);i.data("plan_type",u);f=="never"?l.val(0).attr("disabled","disabled"):l.removeAttr("disabled");if(s!=a)if(a==2){m.fadeIn();h.fadeIn()}else{m.fadeOut();h.fadeOut()}if(o!=u)switch(u){case"0":g.fadeOut();v.fadeOut();p.fadeIn();d.fadeIn();break;case"1":f!="never"?g.fadeIn():g.fadeOut();v.fadeIn();p.fadeOut();d.fadeOut()}if(s!=a)switch(a){case"0":c.removeAttr("disabled");n.html(r.html()).val(f);break;case"1":c.removeAttr("disabled");n.html(r.html()).find("option[value='never']").remove();break;case"2":c.val(0).attr("disabled","disabled");n.html(r.html()).val(f)}});t.find("form").trigger("change")},edit:function(t,n){var r=t.data("id")||0,i=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_paidlistings_plans",action:"edit",data:{id:r}});i.done(function(r){var i=n.children("div").eq(0),s=e("<div>");s.insertBefore(i);var o=i.detach();s.html(r).jrScrollTo();jreviews.paidlistings_plans.formSetup(s);var u=s.find("form");s.on("click","button.jr-save",function(e){e.preventDefault();jreviews.paidlistings_plans.save(t,u,s,o)});s.on("click","button.jr-cancel",function(e){e.preventDefault();o.insertAfter(s).fadeIn("fast");s.remove()});s.find(".jr-tabs").tabs()})},save:function(e,t,n,r){var i=e.closest("div.jr-layout-outer"),s=n.find(".jr-toolbar button").attr("disabled","disabled"),o=e.data("id"),u=n.find("div.jr-validation");u.hide();n.find("#cat_ids").val(jreviews.paid.getTreeCheckedIds("jr-cat-tree"));n.find("#field_names").val(jreviews.paid.getTreeCheckedIds("jr-field-tree"));var a=jreviews.dispatch({form:t});a.done(function(e){e.success===!0?e.isNew?n.fadeOut().promise().done(function(){r.html(e.html);var t=r.find('div.jr-layout-outer[data-id="'+e.id+'"]');r.insertAfter(n).fadeIn("fast").promise().done(function(){t.jrScrollTo({offset:-100,duration:500});jreviews.tools.flashRow(t)});n.remove()}):n.fadeOut("fast").promise().done(function(){r.insertAfter(n).fadeIn("fast").promise().done(function(){i.trigger("update")});n.remove()}):e.str!==""&&u.html(jreviews.__t(e.str)).show()});a.always(function(){s.removeAttr("disabled")})},initFieldGroupsTree:function(t){var n=t.find("#jr-field-tree"),r=n.data("plan-id")||null,i=n.data("cat-id")||null;if(n.length){t.on("click","button.jr-field-tree-toggle",function(t){t.preventDefault();n.jstree(e(this).hasClass("jr-tree-open")?"close_all":"open_all");e(this).toggleClass("jr-tree-open")});n.bind("loaded.jstree",function(t,n){e.each(e("#curr_plan_group_ids").val().split(","),function(t,r){n.inst.open_node(e("#g"+r))});e(this).jstree("close_all")}).bind("open_node.jstree",function(t,n){e.each(e("#curr_plan_field_ids").val().split(","),function(e,t){t!==""&&(n.inst.is_checked("#"+t)||n.inst.check_node("#"+t))})}).bind("check_node.jstree",function(t,n){var r=n.rslt.obj.attr("id");n.inst.open_node(e("#"+r))}).jstree({themes:{theme:"default",icons:!1},plugins:["themes","ui","json_data","checkbox","sort"],json_data:{ajax:{type:"get",url:s2AjaxUri+"&url=admin_paidlistings_plans/jsonFieldGroups/plan_id:"+r+"/cat_id:"+i}},types:{types:{"default":{renameable:!1,deletable:!1,creatable:!1,draggable:!1}}}})}},initCategoryTree:function(t){var n=t.find("#jr-field-tree"),r=t.find("#jr-cat-tree");r.data("page_setup",!0);t.on("click","button.jr-cat-tree-toggle",function(t){t.preventDefault();r.jstree(e(this).hasClass("jr-tree-open")?"close_all":"open_all");e(this).toggleClass("jr-tree-open")});r.bind("loaded.jstree",function(t,n){e.each(e("#curr_plan_cat_ids").val().split(","),function(t,r){r>0&&n.inst.check_node(e("#"+r,"#jr-cat-tree"))});r.jstree("close_all");r.data("page_setup",!1)}).bind("uncheck_node.jstree",function(t,r){var i=r.rslt.obj.attr("id");e("#curr_plan_field_ids").val(jreviews.paid.getTreeCheckedIds("jr-field-tree"));var s=jreviews.dispatch({method:"get",type:"json",controller:"admin/admin_paidlistings_plans",action:"getGroupIdsByNode",data:{node_id:jreviews.paid.getTreeCheckedIds("jr-cat-tree")}});s.done(function(t){n.find("li:not(.jstree-leaf)").each(function(){-1==e.inArray(e(this).attr("id"),t)&&n.jstree("delete_node","#"+e(this).attr("id"))})})}).bind("check_node.jstree",function(t,i){var s=[];r.find("li.jstree-checked").each(function(){this.id.match(/^([0-9]+)$/)!==null&&s.push(this.id)});s=s.join(",");if(!1===r.data("page_setup")){var o=jreviews.dispatch({method:"get",type:"json",controller:"admin/admin_paidlistings_plans",action:"jsonFieldGroups",data:{cat_id:s}});o.done(function(t){e.each(t,function(t,r){n.find("#"+r.attr.id).length||n.jstree("create_node",n,"first",r,function(){e.each(r.children,function(t,i){n.jstree("create_node",e("#"+r.attr.id),"last",i)})})})})}}).jstree({themes:{theme:"default",icons:!1},plugins:["themes","ui","json_data","checkbox"],json_data:{ajax:{type:"get",url:s2AjaxUri+"&url=admin_paidlistings_plans/jsonCategoryTree"}},types:{types:{"default":{renameable:!1,deletable:!1,creatable:!1,draggable:!1}}}})},generateOrders:function(t,n){var r=t.data("plan-id");t.data("Orders.abort",0);if(n=="process"){jreviews.paid.orders.generateOrders(r,"process");return}var i=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_paidlistings_orders",action:"generateOrders",data:{id:r,task:"init"}});i.done(function(n){var i={};i[jreviews.__t("START")]=function(){var n=e(this),i=n.closest(".jrDialog"),s=jreviews.dispatch({method:"get",type:"text",controller:"admin/admin_paidlistings_orders",action:"generateOrders",data:{id:r,task:"process"}});s.done(function(e){n.find("#jr-listing-count").html(e);if(t.data("Orders.abort")==1)return!1;Number(e)===0?i.find(".ui-dialog-buttonpane").slideUp():i.find("button:contains("+jreviews.__t("START")+")").trigger("click")})};i[jreviews.__t("CANCEL")]=function(){t.data("Orders.abort",1);e(this).dialog("close")};var s=function(){t.data("Orders.abort",1)},o=e.jrDialog(n,{title:t.html(),width:"600px",buttons:i,close:s}),u=o.find("#jr-listing-count").html(),a=e(".ui-dialog-buttonpane");a.find("button:contains("+jreviews.__t("START")+")").addClass("jrButton").prepend('<span class="jrIconYes"></span>');a.find("button:contains("+jreviews.__t("CANCEL")+")").addClass("jrButton").prepend('<span class="jrIconCancel"></span>');Number(u)===0&&a.slideUp()})},updateOrders:function(t,n){var r=t.data("plan-id");t.data("UpdateOrders.abort",0);if(n=="process"){jreviews.paid.orders.generateOrders(r,"process");return}var i=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_paidlistings_orders",action:"updateOrders",data:{id:r,task:"init"}});i.done(function(n){var i={};i[jreviews.__t("START")]=function(){var n=e(this),i=n.closest(".jrDialog"),s=jreviews.dispatch({method:"get",type:"text",controller:"admin/admin_paidlistings_orders",action:"updateOrders",data:{id:r,task:"process"}});s.done(function(e){n.find("#jr-order-count").html(e);if(t.data("UpdateOrders.abort")==1)return!1;Number(e)===0?i.find(".ui-dialog-buttonpane").slideUp():i.find("button:contains("+jreviews.__t("START")+")").trigger("click")})};i[jreviews.__t("CANCEL")]=function(){t.data("UpdateOrders.abort",1);e(this).dialog("close")};var s=function(){t.data("UpdateOrders.abort",1)},o=e.jrDialog(n,{title:t.html(),width:"600px",buttons:i,close:s}),u=o.find("#jr-order-count").html(),a=e(".ui-dialog-buttonpane");a.find("button:contains("+jreviews.__t("START")+")").addClass("jrButton").prepend('<span class="jrIconYes"></span>');a.find("button:contains("+jreviews.__t("CANCEL")+")").addClass("jrButton").prepend('<span class="jrIconCancel"></span>');Number(u)===0&&a.slideUp()})}};jreviews.paidlistings_handlers={edit:function(t,n){var r=t.data("id")||0,i=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_paidlistings_handlers",action:"edit",data:{id:r}});i.done(function(n){var r={};r[jreviews.__t("SUBMIT")]=function(){var n=e(this),r=n.find("form"),i=r.find(".jr-validation");i.html("").hide();var s=jreviews.dispatch({form:r});s.done(function(e){if(e.success){n.dialog("close");t.closest("div.jr-layout-outer").trigger("update")}else e.str&&i.html(jreviews.__t(e.str)).show()})};r[jreviews.__t("CANCEL")]=function(){e(this).dialog("close")};var i=e.jrDialog(n,{title:t.html(),buttons:r,width:"800px"}),s=i.find("form"),o=e(".ui-dialog-buttonpane");o.find("button:contains("+jreviews.__t("SUBMIT")+")").addClass("jrButton").prepend('<span class="jrIconYes"></span>');o.find("button:contains("+jreviews.__t("CANCEL")+")").addClass("jrButton").prepend('<span class="jrIconCancel"></span>')})}};jreviews.paidlistings_orders={edit:function(t,n){var r=t.data("id")||0,i=jreviews.dispatch({method:"get",type:"html",controller:"admin/admin_paidlistings_orders",action:"edit",data:{id:r}});i.done(function(n){var r={};r[jreviews.__t("SUBMIT")]=function(){var n=e(this),r=n.find("form");r.find("#field_names").val(jreviews.paid.getTreeCheckedIds("jr-field-tree"));var i=jreviews.dispatch({form:r});i.done(function(e){if(e.success){n.dialog("close");t.closest("div.jr-layout-outer").trigger("update")}else if(e.msg){n.dialog("option","buttons",[]);n.html(e.msg)}})};r[jreviews.__t("CANCEL")]=function(){e(this).dialog("close")};var i=e.jrDialog(n,{buttons:r,width:"960px"}),s=i.find("form");i.find(".jr-tabs").tabs();jreviews.userAutocomplete(s);jreviews.paidlistings_plans.initFieldGroupsTree(i);var o=e(".ui-dialog-buttonpane");o.find("button:contains("+jreviews.__t("SUBMIT")+")").addClass("jrButton").prepend('<span class="jrIconYes"></span>');o.find("button:contains("+jreviews.__t("CANCEL")+")").addClass("jrButton").prepend('<span class="jrIconCancel"></span>')})}};jreviews.addOnload("paidlistings-admin",jreviews.paid.init)})(jQuery);